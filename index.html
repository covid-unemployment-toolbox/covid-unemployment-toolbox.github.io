<!DOCTYPE html>
<html lang='en'>
  <head>
    

  <!-- <script src='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css' rel='stylesheet' /> -->

    <title>Searchable Map Template - CSV</title>

    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content='You want to put your data on a searchable, filterable map. Provide a comma separated file (CSV) and this free, open source template will do the rest.' name='description'>
    <meta content='Searchable Map Template - CSV' name='author'>

    <!-- Facebook metadata -->
    <meta content="Searchable Map Template - CSV" property="og:site_name">
    <meta content="Searchable Map Template - CSV" property="og:title">
    <meta content="website" property="og:type">
    <meta content="You want to put your data on a searchable, filterable map. Provide a comma separated file (CSV) and this free, open source template will do the rest." property="og:description">
    <meta content="https://searchable-map-template-csv.netlify.com/" property="og:url">
    <meta content="https://searchable-map-template-csv.netlify.com/img/screenshot.jpg" property="og:image">
    
    <!-- Twitter metadata -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@DataMadeCo">
    <meta name="twitter:creator" content="@DataMadeCo">
    <meta name="twitter:title" content="Searchable Map Template - CSV">
    <meta name="twitter:url" content="https://searchable-map-template-csv.netlify.com/">
    <meta name="twitter:description" content="You want to put your data on a searchable, filterable map. Provide a comma separated file (CSV) and this free, open source template will do the rest.">
    <meta name="twitter:image:src" content="https://searchable-map-template-csv.netlify.com/img/screenshot.jpg">

    <!-- Styles -->
    <!-- Bootstrap cssS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/custom.css"/>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="lib/jquery-3.3.1.min.js"></script>
    <script src="lib/popper.min.js"></script>
    <script src="lib/bootstrap.min.js"></script>

    <script src="lib/ejs.min.js"></script>
    <script src="lib/jquery.address.js"></script>
    <script src="lib/jquery.csv.min.js"></script>
    <script src="lib/moment.js"></script>
    <script src="lib/geojson.min.js"></script>
    <script src="js/csv-to-geojson.js"></script>

    <!-- Leaflet and Google -->
    <link rel="stylesheet" href="css/leaflet.css"/>
    <script src="lib/leaflet.js"></script>
    <script src='lib/turf.min.js'></script>
    <script src="https://maps.google.com/maps/api/js?v=3.37&libraries=places&key=AIzaSyDHP5GTCQRHJXNWcGvzkSAztS6npMOqgZA"></script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap" async defer></script> -->
    
    

    <script src="lib/Leaflet.GoogleMutant.js" ></script>
    <script src="lib/leaflet-color-markers.js" ></script>
    
    <!-- Custom JavaScript -->
    <script src="js/searchable_map_lib.js"></script>
    <script src="js/analytics_lib.js"></script>

    <script>
      var apikey = 'e6cdbf647b42473a82025fe1c6dbf63f';
      var latitude = '51.0';
      var longitude = '7.0';
      var address = 'hjjk';
    
      var api_url = 'https://api.opencagedata.com/geocode/v1/json'
    
      var request_url = api_url
        + '?'
        + 'key=' + apikey
        + '&q=' + encodeURIComponent(address)
        + '&pretty=1'
        + '&no_annotations=1';
    
      // see full list of required and optional parameters:
      // https://opencagedata.com/api#forward
    
      var request = new XMLHttpRequest();
      request.open('GET', request_url, true);
    
      request.onload = function() {
        // see full list of possible response codes:
        // https://opencagedata.com/api#codes
    
        if (request.status == 200){ 
          // Success!
          var data = JSON.parse(request.responseText);
          alert(data.results[0].formatted);
    
        } else if (request.status <= 500){ 
          // We reached our target server, but it returned an error
                               
          console.log("unable to geocode! Response code: " + request.status);
          var data = JSON.parse(request.responseText);
          console.log(data.status.message);
        } else {
          console.log("server error");
        }
      };
    
      request.onerror = function() {
        // There was a connection error of some sort
        console.log("unable to connect to server");        
      };
    
      request.send();  // make the request
                                 
    </script>
    <!-- Added for COVID-19 Application -->
    <link rel="stylesheet" href="css/covid.css"/>
    <!-- <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Indie+Flower" /> -->

  </head>
  <body>
    <div class="container-background">
      <img src="img/header.jpg" alt="header" style="width:100%;">
      <div class="centered">
        <h1 class="header-text">COVID Unemployment Toolbox</h1>
      </div>
    </div>

<!-- 
    <nav class="navbar navbar-expand-md navbar-light mb-2">
      <a class="navbar-brand" href="/">
        Searchable Map Template - CSV
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse mr-auto" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
          <li class='nav-item'>
            <a class="nav-link active" href="/"><i class="fa fa-map-marker" aria-hidden="true"></i> Map</a>
          </li>
          <li class='nav-item'>
            <a class="nav-link" href="/about.html"><i class="fa fa-info-circle" aria-hidden="true"></i> About</a>
          </li>
        </ul>
      </div>
    </div> -->
    <!-- <div>
      <img class="header" src="img/header.jpg" alt="Logo">
    </div> -->
    <!-- <div class="container">
      <div class="chevron"></div>
      <div class="chevron"></div>
      <div class="chevron"></div>
      <span class="text">Scroll down</span>
      <a class="text" href="https://naegele.it">See it in action</a>
    </div> -->

    <main role="main" class="container-fluid">

      <div class='row'>
        <div class="col-md-4">
          <p>You want to put your data on a searchable, filterable map. Provide a comma separated file (CSV) and this free, open source template will do the rest. <br /><a href='/about.html'>Read more &raquo;</a></p>

          <div class="card bg-light">
            <div class="card-body">
              <div class='row'>
                <div class="col-md-8">
                  <div class="form-group">
                      Near an address
                      <input class='form-control' id='search-address' placeholder='Enter an address' type='text'>
                  </div>
                </div>

                <div class="col-md-4">
                  <div class='form-group'>
                      Within
                      <select id='search-radius' class='form-control'>
                        <option value='400'>2 blocks</option>
                        <option value='805'>1/2 mile</option>
                        <option value='1610'>1 mile</option>
                        <option value='3220'>2 miles</option>
                        <option value='8050'>5 miles</option>
                      </select>
                  </div>
                </div>
              </div>

              <div class='row'>
                <div class="col-md-12">
                  <div class="form-group">
                      Search by name
                      <input class='form-control' id='search-name' placeholder='Enter a business or organization name' type='text'>
                  </div>
                </div>
              </div>

              <button class='btn btn-primary' id="btnSearch"><i class='fa fa-search'></i> Search</button>
              <a href="/" class='btn btn-secondary' id="btnReset" title="Reset"><i class="fa fa-repeat" aria-hidden="true"></i> Reset</a>
              <button class='btn btn-dark' id='btnViewMode' title='Change view'><i class='fa fa-list'></i> List view</button>

              </div>
            </div>
          </div>

          <div class='col-md-8'>
            <div id='mapCanvas' style="display: block; height: 1000px;"></div>
            <div id="listCanvas" style="display: none">
              <h2 class='list-header hidden-xs'>Search results <small id='list-result-count'></small></h2>
              
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Location</th>
                      <th scope="col">Address</th>
                      <th scope="col">Phone</th>
                      <th scope="col">Hours</th>
                    </tr>
                  </thead>
                  <tbody id='results-list'></tbody>
                </table>
              </div>
            </div>
            <p class='float-right'>Based on <a href='https://github.com/datamade/searchable-map-template-csv' target='_blank'>Searchable Map Template - CSV</a> by <a href='https://derekeder.com/' target='_blank'>Derek Eder</a> and <a href='https://datamade.us/' target='_blank'>DataMade</a></p>
          </div>
        </div>

        <div class="modal fade" id="modal-pop" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-body">
                <div class="container-fluid bd-example-row">
                  <div class="row">
                    <div class="col-md-12">
                      <button type="button" class="close close-btn" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle" aria-hidden="true"></i></span></button>
                      <div id="modal-main"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script type="text/javascript" src="js/map.js"></script>

    </main>
  </body>
</html>